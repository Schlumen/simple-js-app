let pokemonRepository=function(){let pokemonList=[],apiUrl="https://pokeapi.co/api/v2/pokemon/?limit=1300",loadBar=document.querySelector(".lds-dual-ring"),searchButton;function getAll(){return pokemonList}function add(pokemon){"object"==typeof pokemon&&"name"in pokemon&&"detailsUrl"in pokemon&&pokemonList.push(pokemon)}function getByName(search){return pokemonList.filter((function(pokemon){return pokemon.name.toLowerCase().includes(search.toLowerCase())}))}function addListItem(pokemon){let uPokemonList=$(".pokemon-list"),listItem=$('<li class="group-list-item"></li>'),button=$(`<button type="button" class="pokemon-button btn btn-primary" \n            data-toggle="modal" data-target="#pokeModal">${pokemon.name}</button>`);listItem.append(button),uPokemonList.append(listItem),button.on("click",(function(){showDetails(pokemon)}))}function showDetails(pokemon){loadDetails(pokemon).then((function(){showModal(pokemon)}))}function loadList(){return showLoadingMessage(),fetch(apiUrl).then((function(response){return response.json()})).then((function(json){json.results.forEach((function(item){let pokemon;add({name:item.name,detailsUrl:item.url})}))})).catch((function(e){console.error(e)})).finally((function(){hideLoadingMessage()}))}function loadDetails(item){let url=item.detailsUrl;return fetch(url).then((function(response){return response.json()})).then((function(details){item.imageUrl=details.sprites.front_default,item.height=details.height,item.types=details.types,item.weight=details.weight})).catch((function(e){console.error(e)}))}function showLoadingMessage(){loadBar.classList.remove("lds-dual-ring-hidden"),loadBar.classList.add("lds-dual-ring-visible")}function hideLoadingMessage(){loadBar.classList.remove("lds-dual-ring-visible"),loadBar.classList.add("lds-dual-ring-hidden")}function showModal(pokemon){let types="";pokemon.types.forEach((function(type){types+=type.type.name+" "}));let modalTitile=$(".modal-title"),modalBody=$(".modal-body");modalTitile.empty(),modalBody.empty(),modalTitile.append(pokemon.name),modalBody.append(`<img class="modal-img" src="${pokemon.imageUrl}">`),modalBody.append(`<p>Height: ${pokemon.height}</p>`),modalBody.append(`<p>Weight: ${pokemon.weight}</p>`),modalBody.append(`<p>Types: ${types}</p>`)}function loadAll(){loadList().then((function(){getAll().forEach((function(pokemon){addListItem(pokemon)}))}))}return $(".btn-warning").on("click",(function(){let uPokemonList;$(".pokemon-list").empty(),getByName($(".form-control").val()).forEach((function(pokemon){addListItem(pokemon)}))})),{getAll:getAll,add:add,getByName:getByName,addListItem:addListItem,loadList:loadList,loadDetails:loadDetails,showDetails:showDetails,showModal:showModal,loadAll:loadAll}}();pokemonRepository.loadAll();